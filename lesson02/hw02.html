<!DOCTYPE html>
<html>
    <head>
        <title>JavaScript basics - lesson02 homework</title>
        <meta charset="utf-8">
        <script>
            /*****************************************************************
            1.  Дан код:

                var a = 1, b = 1, c, d;
                c = ++a; alert(c);           // 2
                // интерпретатор сперва обрабатывает префиксный инкремент
                // переменной a, после производит присваивание измененного
                // значения a переменной c
                d = b++; alert(d);           // 1
                // постфиксный инкремент переменной b обрабатывается после
                // присваивания начального значения b переменной d;
                // по завершении инструкций присваивания и инкремента в b
                // находится значение 2
                c = (2+ ++a); alert(c);      // 5
                // в выражении после цифры 2 следует бинарный плюс, префиксный
                // инкремент переменной a выполняется до операции сложения, в
                // переменную c попадает сумма 2 и измененного значения a
                d = (2+ b++); alert(d);      // 4
                // постфиксный инкремент переменной b обрабатывается после
                // суммирования 2 и предыдущего значения b;
                // по завершении сложения, присваивания и инкремента в b
                // находится значение 3
                alert(a);                    // 3
                alert(b);                    // 3
                // в последних двух строках арифметических операций с
                // переменными не производится, все изменения происходили в
                // коде выше; с момента объявления и инициализации a и b в
                // коде было выполнено по 2 инкремента этих переменных

                Почему код даёт именно такие результаты?

            ******************************************************************
            2.  Чему будет равен x в примере ниже?
                var a = 2;
                var x = 1 + (a *= 2);   // ответ: x == 5

            ******************************************************************
            3.  Объявить две целочисленные переменные a и b и задать им
                произвольные начальные значения. Затем написать скрипт,
                который работает по следующему принципу:
                если a и b положительные, вывести их разность;
                если а и b отрицательные, вывести их произведение;
                если а и b разных знаков, вывести их сумму;
                ноль можно считать положительным числом. */

            var a = Math.round(Math.random() * 100) - 50;
            var b = Math.round(Math.random() * 100) - 50;
            if (a >= 0 && b >= 0) {
                console.log(a.toString() + " - " + b.toString() + " = " + (a - b).toString());
            }
            else if (a < 0 && b < 0) {
                console.log(a.toString() + " * " + b.toString() + " = " + (a * b).toString());
            }
            else { // знаки значений переменных противоположны
                console.log(a.toString() + " + " + b.toString() + " = " + (a + b).toString());
            }

            /*****************************************************************
            4.  Присвоить переменной а значение в промежутке [0..15].
                С помощью оператора switch организовать вывод чисел от a до 15.
                */

            a = Math.round(Math.random() * 15);
            switch (a) {
                case 0:
                    console.log(0);
                case 1:
                    console.log(1);
                case 2:
                    console.log(2);
                case 3:
                    console.log(3);
                case 4:
                    console.log(4);
                case 5:
                    console.log(5);
                case 6:
                    console.log(6);
                case 7:
                    console.log(7);
                case 8:
                    console.log(8);
                case 9:
                    console.log(9);
                case 10:
                    console.log(10);
                case 11:
                    console.log(11);
                case 12:
                    console.log(12);
                case 13:
                    console.log(13);
                case 14:
                    console.log(14);
                default:
                    console.log(15);
            }

            /*****************************************************************
            5.  Реализовать основные 4 арифметические операции в виде функций
                с двумя параметрами. Обязательно использовать оператор return.
                */

            function bAdd(first, second) {
                if (isNaN(first) || isNaN(second)) {
                    console.error("Ошибка сложения: как минимум один из операндов не является числом");
                    return NaN;
                }
                if (first === "" || second === "") {
                    console.error("Операнд не может быть пустой строкой");
                    return undefined;
                }
                if (Object.is(first, null) || Object.is(second, null)) {
                    console.error("Операнд не может быть null");
                    return undefined;
                }
                return first / 1 + second / 1;
            }

            function bSub(first, second) {
                if (isNaN(first) || isNaN(second)) {
                    console.error("Ошибка вычитания: как минимум один из операндов не является числом");
                    return NaN;
                }
                if (first === "" || second === "") {
                    console.error("Операнд не может быть пустой строкой");
                    return undefined;
                }
                if (Object.is(first, null) || Object.is(second, null)) {
                    console.error("Операнд не может быть null");
                    return undefined;
                }
                return first - second;
            }

            function bMul(first, second) {
                if (isNaN(first) || isNaN(second)) {
                    console.error("Ошибка умножения: как минимум один из операндов не является числом");
                    return NaN;
                }
                if (first === "" || second === "") {
                    console.error("Операнд не может быть пустой строкой");
                    return undefined;
                }
                if (Object.is(first, null) || Object.is(second, null)) {
                    console.error("Операнд не может быть null");
                    return undefined;
                }
                return first * second;
            }

            function bDiv(first, second) {
                if (isNaN(first) || isNaN(second)) {
                    console.error("Ошибка деления: как минимум один из операндов не является числом");
                    return NaN;
                }
                if (first === "" || second === "") {
                    console.error("Операнд не может быть пустой строкой");
                    return undefined;
                }
                if (Object.is(first, null) || Object.is(second, null)) {
                    console.error("Операнд не может быть null");
                    return undefined;
                }
                if (second == 0) {
                    console.error("Ошибка деления: на ноль делить всё же не хотелось бы");
                    return NaN;
                }
                return first / second;
            }

            /*
            /////////////// test cases ///////////////
            //
            console.log("******* СЛОЖЕНИЕ **********");
            console.log(bAdd("87.3", 22));
            console.log(bAdd(-65, 65.02));
            console.log(bAdd("ff", -5));
            console.log(bAdd("", 9));
            //
            console.log("******* ВЫЧИТАНИЕ *********");
            console.log(bSub("87.3", 22));
            console.log(bSub(-65, 65.02));
            console.log(bSub("ff", -5));
            console.log(bSub("", 9));
            //
            console.log("******* УМНОЖЕНИЕ *********");
            console.log(bMul("87.3", 22));
            console.log(bMul(-65, 65.02));
            console.log(bMul("ff", -5));
            console.log(bMul("", 9));
            //
            console.log("******** ДЕЛЕНИЕ **********");
            console.log(bDiv("87.3", 22));
            console.log(bDiv(-65, 65.02));
            console.log(bDiv("ff", -5));
            console.log(bDiv(55.88, "0"));
            console.log(bDiv("", 9));
            console.log(bDiv(81, ""));
            */

            /*****************************************************************
            6.  Реализовать функцию с тремя параметрами:
                function mathOperation(arg1, arg2, operation)
                где arg1, arg2 – значения аргументов, operation – строка с
                названием операции. В зависимости от переданного значения
                операции выполнить одну из арифметических операций
                (использовать функции из пункта 3) и вернуть полученное
                значение (использовать switch). */
            
            function mathOperation(arg1, arg2, operation) {
                switch (operation) {
                    case "+":
                        return bAdd(arg1, arg2);
                    case "-":
                        return bSub(arg1, arg2);
                    case "*":
                        return bMul(arg1, arg2);
                    case "/":
                        return bDiv(arg1, arg2);
                    default:
                        console.error("Запрошенная операция \"" + operation + "\" не поддерживается");
                        return;
                }
            }

            /*
            /////////////// test cases ///////////////
            //
            console.log("******* СЛОЖЕНИЕ **********");
            console.log(mathOperation("87.3", 22, "+"));
            console.log(mathOperation(-65, 65.02, "+"));
            console.log(mathOperation("ff", -5, "+"));
            //
            console.log("******* ВЫЧИТАНИЕ *********");
            console.log(mathOperation("87.3", 22, "-"));
            console.log(mathOperation(-65, 65.02, "-"));
            console.log(mathOperation("ff", -5, "-"));
            //
            console.log("******* УМНОЖЕНИЕ *********");
            console.log(mathOperation("87.3", 22, "*"));
            console.log(mathOperation(-65, 65.02, "*"));
            console.log(mathOperation("ff", -5, "*"));
            //
            console.log("******** ДЕЛЕНИЕ **********");
            console.log(mathOperation("87.3", 22, "/"));
            console.log(mathOperation(-65, 65.02, "/"));
            console.log(mathOperation("ff", -5, "/"));
            console.log(mathOperation(55.88, "0", "/"));
            //
            console.log("*** ОШИБОЧНЫЙ ПАРАМЕТР ****");
            console.log(mathOperation("87.3", 22));
            console.log(mathOperation("87.3", 22, "0"));
            console.log(mathOperation("87.3", 22, null));
            */

            /*****************************************************************
            7.  *Сравнить null и 0. Попробуйте объяснить результат. */

            console.log("null == 0 -> " + (null == 0));     // false
            console.log("null === 0 -> " + (null === 0));   // false
            console.log("null > 0 -> " + (null > 0));       // false
            console.log("null >= 0 -> " + (null >= 0));     // true
            console.log("null < 0 -> " + (null < 0));       // false
            console.log("null <= 0 -> " + (null <= 0));     // true

            // для оптимизации в JavaScript за результат сравнения 'больше
            // или равно' и 'меньше или равно' принимается инвертированный
            // результат сравнения тех же значений логическими операторами
            // 'меньше' и 'больше' соответственно (вместо прохождения по двум
            // алгоритмам сравнения интерпретатор просто инвертирует результат
            // одного обратного сравнения)

            /*****************************************************************
            8.  *С помощью рекурсии организовать функцию возведения числа в
                степень. Формат: function power(val, pow), где val – заданное
                число, pow – степень. */

            function power(val, pow) {
                if (isNaN(val) || isNaN(pow)) {
                    console.error("Один или оба переданных параметра не являются числом");
                    return NaN;
                }
                if (val === "" || pow === "") {
                    console.error("Ни число, ни степень не могут быть пустой строкой");
                    return undefined;
                }
                if (Object.is(val, null) || Object.is(pow, null)) {
                    console.error("Ни число, ни степень не могут быть null");
                    return undefined;
                }
                if (pow % 1 != 0 || pow < 0) {
                    console.error("Функция работает только с целыми положительными степенями");
                    return undefined;
                }
                switch (pow) {
                    case 0:
                        return 1;
                    case 1:
                        return val;
                    default:
                        if (pow % 2 == 0) {
                            return power(val * val, pow / 2);
                        }
                        else {
                            return power(val, pow - 1) * val;
                        }
                }
            }

            /*
            /////////////// test cases ///////////////
            //
            console.log("2 ** 10 = " + power(2, 10));
            console.log("2 ** 33 = " + power(2, 33));
            console.log("1.6 ** 25 = " + power(1.6, 25));
            console.log("\"10\" ** 7 = " + power("10", 7));
            console.log("\"8\" ** \"6\" = " + power("8", "6"));
            console.log("8 ** 1/3 = " + power(8, 1/3));
            console.log("8 ** \"b\" = " + power(8, "b"));
            console.log("3 ** \"-6\" = " + power(3, "-6"));
            console.log("8 ** \"1\" = " + power(8, "1"));
            console.log("8 ** \"0\" = " + power(8, "0"));
            console.log("33 ** \"\" = " + power(8, ""));

            /****************************************************************/
        </script>
    </head>
    <body>
    </body>
</html>