<!DOCTYPE html>
<html>
    <head>
        <title>JavaScript basics - lesson03 homework</title>
        <meta charset="utf-8">
        <script>
            /******************************************************************
            1.  С помощью цикла while вывести все простые числа в промежутке
                от 0 до 100. */
            
            console.log("**** простые числа ****");
            var simple = new Array(101);
            simple.fill(true);
            var idx = 2, cmpl;
            while(idx <= simple.length) {
                if(simple[idx]) {
                    console.log(idx);
                    cmpl = idx * 2;
                    while(cmpl <= simple.length) {
                        simple[cmpl] = false;
                        cmpl += idx;
                    }
                }
                idx++;
            }

            /******************************************************************
            2.  С этого урока начинаем работать с функционалом интернет-магазина.
                Предположим, есть сущность корзины. Нужно реализовать функционал
                подсчета стоимости корзины в зависимости от находящихся в ней
                товаров.

            /******************************************************************
            3.  Товары в корзине хранятся в массиве. Задачи:
                a.  Организовать такой массив для хранения товаров в корзине;
                b.  Организовать функцию countBasketPrice, которая будет
                    считать стоимость корзины. */
            
            console.log("**** упражнения с корзиной ****");
            var userBasket = [];
            const good1 = {
                name: "Тигр плюшевый",
                price: 99.9
            };
            const good2 = {
                name: "Дурилка картонная",
                price: 22.22
            };
            const good3 = {
                name: "Рыба сухопутная",
                price: 150
            };
            // поиск товара в корзине
            function checkBasketSlot(element) {
                return Object.is(element.good, this);
            }
            // некий механизм добавления товаров в корзину
            userBasket.push({good: good1, amount: 2});
            userBasket.push({good: good2, amount: 1});
            userBasket.push({good: good3, amount: 5});
            // опять же условный механизм добавления количества товара,
            // уже находящегося в корзине
            var slotIdx = userBasket.findIndex(checkBasketSlot, good2);
            if(slotIdx >=0) {
                userBasket[slotIdx].amount++;
            }
            // console.log(basket);
            // функция подсчета стоимости всей корзины
            function countBasketPrice(basket) {
                var total = 0;
                for(var slot of basket) {
                    total += slot.good.price * slot.amount;
                }
                return total;
            }
            // вывод всех позиций корзины для проверки
            for(var slot of userBasket){
                // console.log(`${slot.good.name} | ${slot.good.price} | ${slot.amount} | ${slot.good.price * slot.amount}`);
                var slotRow = slot.good.name + " | ";
                slotRow += slot.good.price.toFixed(2) + " | ";
                slotRow += slot.amount + " | ";
                slotRow += (slot.good.price * slot.amount).toFixed(2);
                console.log(slotRow);
            }
            // вывод стоимости всей корзины
            console.log(countBasketPrice(userBasket).toFixed(2));

            /******************************************************************
            4*. Вывести с помощью цикла for числа от 0 до 9, не используя тело
                цикла. Выглядеть это должно так:
                for(...){// здесь пусто}
                */

            console.log("**** цифры от 0 до 9 ****");
            for(var i = 0; i < 10; console.log(i++)) {}

            /******************************************************************
            5*. Нарисовать пирамиду с 20 рядами с помощью console.log, как
                показано на рисунке:
                x
                xx
                xxx
                xxxx
                xxxxx
                */
            
            console.log("**** пирамида ****");
            for(var j = 0; j < 20; j++) {for(var k = 0, s = ""; k <= j; k++, s +="x") {} console.log(s)}

            /*****************************************************************/
        </script>
    </head>
    <body>
    </body>
</html>